<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>ì‹¤ì œ ë¸”ë™í™€ ê¸°ë°˜ 3D ì‹œë®¬ë ˆì´ì…˜</title>
    <style>
        body { 
            margin: 0; 
            overflow: hidden; 
            background-color: #000; 
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        canvas { display: block; }
        #info {
            position: absolute;
            top: 20px; 
            left: 20px;
            right: 20px;
            color: #ddd;
            pointer-events: none; 
            user-select: none;
            text-shadow: 2px 2px 4px #000;
            max-width: 500px;
            transition: opacity 0.3s ease;
        }
        #info h1 {
            margin: 0 0 10px 0;
            font-size: 24px;
            color: #ff8800;
        }
        #info p {
            margin: 5px 0;
            font-size: 14px;
            line-height: 1.6;
        }
        #controls {
            position: absolute;
            bottom: 20px;
            left: 20px;
            color: #aaa;
            font-size: 12px;
            pointer-events: none;
            text-shadow: 1px 1px 2px #000;
            transition: opacity 0.3s ease;
        }
        #buttonContainer {
            position: absolute;
            bottom: 20px;
            right: 20px;
            display: flex;
            gap: 10px;
            z-index: 1000;
        }
        #rotateBtn, #hideBtn {
            padding: 12px 24px;
            background: linear-gradient(135deg, #ff6600, #ff9944);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            font-weight: bold;
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(255, 102, 0, 0.4);
            transition: all 0.3s ease;
            pointer-events: auto;
        }
        #rotateBtn:hover, #hideBtn:hover {
            background: linear-gradient(135deg, #ff7722, #ffaa55);
            box-shadow: 0 6px 16px rgba(255, 102, 0, 0.6);
            transform: translateY(-2px);
        }
        #rotateBtn:active, #hideBtn:active {
            transform: translateY(0);
        }
        #hideBtn {
            background: linear-gradient(135deg, #666, #999);
        }
        #hideBtn:hover {
            background: linear-gradient(135deg, #777, #aaa);
        }
        .hidden {
            opacity: 0 !important;
            pointer-events: none !important;
            transition: opacity 0.3s ease;
        }
        #buttonContainer.buttons-hidden button {
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        #buttonContainer:hover button {
            opacity: 1 !important;
        }
        #hoverArea {
            position: absolute;
            bottom: 0;
            right: 0;
            width: 400px;
            height: 200px;
            pointer-events: none;
            z-index: 999;
        }
        #speedControl {
            position: absolute;
            bottom: 70px;
            right: 20px;
            background: rgba(0, 0, 0, 0.85);
            padding: 15px 20px;
            border-radius: 8px;
            pointer-events: auto;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 102, 0, 0.3);
            display: none;
            opacity: 0;
            transform: translateY(10px);
            transition: opacity 0.3s ease, transform 0.3s ease;
            min-width: 180px;
        }
        #speedControl.show {
            display: block;
            opacity: 1;
            transform: translateY(0);
        }
        #speedControl label {
            color: #ff9944;
            font-size: 12px;
            font-weight: bold;
            display: block;
            margin-bottom: 8px;
        }
        #speedInputContainer {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 8px;
        }
        #speedInput {
            width: 60px;
            padding: 6px 8px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 102, 0, 0.3);
            border-radius: 4px;
            color: #fff;
            font-size: 14px;
            text-align: center;
            outline: none;
        }
        #speedInput:focus {
            border-color: #ff9944;
            background: rgba(255, 255, 255, 0.15);
        }
        #speedUnit {
            color: #aaa;
            font-size: 12px;
        }
        #speedSlider {
            width: 100%;
            height: 6px;
            border-radius: 3px;
            outline: none;
            -webkit-appearance: none;
            background: linear-gradient(to right, #333, #666);
        }
        #speedSlider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 16px;
            height: 16px;
            border-radius: 50%;
            background: linear-gradient(135deg, #ff6600, #ff9944);
            cursor: pointer;
            box-shadow: 0 2px 6px rgba(255, 102, 0, 0.5);
        }
        #speedSlider::-moz-range-thumb {
            width: 16px;
            height: 16px;
            border-radius: 50%;
            background: linear-gradient(135deg, #ff6600, #ff9944);
            cursor: pointer;
            border: none;
            box-shadow: 0 2px 6px rgba(255, 102, 0, 0.5);
        }
        #speedValue {
            color: #aaa;
            font-size: 11px;
            margin-top: 5px;
            text-align: center;
        }
    </style>
</head>
<body>
    <div id="info">
        <h1>M87* ë¸”ë™í™€ ì‹œë®¬ë ˆì´ì…˜</h1>
        <p>EHT(Event Horizon Telescope)ê°€ ì´¬ì˜í•œ ì‹¤ì œ ë¸”ë™í™€ì„ ê¸°ë°˜ìœ¼ë¡œ ì œì‘ë˜ì—ˆìŠµë‹ˆë‹¤.</p>
        <p style="font-size: 12px; color: #888;">ì¤‘ì•™: ì‚¬ê±´ì˜ ì§€í‰ì„  ê·¸ë¦¼ì | ì£¼ë³€: ê³ ì˜¨ í”Œë¼ì¦ˆë§ˆ ê°•ì°© ì›ë°˜</p>
    </div>
    
    <div id="controls">
        ë§ˆìš°ìŠ¤ ë“œë˜ê·¸: íšŒì „ | íœ : ì¤Œ ì¡°ì‘
    </div>
    
    <div id="buttonContainer">
        <button id="rotateBtn">ğŸŒ€ ìë™ íšŒì „</button>
        <button id="hideBtn">ğŸ‘ï¸ ìˆ¨ê¸°ê¸°</button>
    </div>
    
    <div id="speedControl">
        <label>íšŒì „ ì†ë„</label>
        <div id="speedInputContainer">
            <input type="number" id="speedInput" min="1" max="100" value="20">
            <span id="speedUnit">/ 100</span>
        </div>
        <input type="range" id="speedSlider" min="1" max="100" value="20" step="1">
        <div id="speedValue">ëŠë¦¼</div>
    </div>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://unpkg.com/three@0.128.0/examples/js/controls/OrbitControls.js"></script>

    <script>
        const scene = new THREE.Scene();
        scene.background = new THREE.Color(0x000000);
        scene.fog = new THREE.FogExp2(0x000000, 0.003);

        const camera = new THREE.PerspectiveCamera(60, window.innerWidth / window.innerHeight, 0.1, 1000);
        camera.position.set(0, 8, 35);

        const renderer = new THREE.WebGLRenderer({ antialias: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.toneMapping = THREE.ReinhardToneMapping;
        renderer.toneMappingExposure = 1.8;
        document.body.appendChild(renderer.domElement);

        const controls = new THREE.OrbitControls(camera, renderer.domElement);
        controls.enableDamping = true;
        controls.dampingFactor = 0.05;
        controls.minDistance = 15;
        controls.maxDistance = 200;

        let autoRotating = false;
        let rotationSpeed = 0.0002;

        // ì‚¬ê±´ì˜ ì§€í‰ì„ 
        const bhGeo = new THREE.SphereGeometry(2.5, 64, 64);
        const bhMat = new THREE.MeshBasicMaterial({ color: 0x000000 });
        const blackHole = new THREE.Mesh(bhGeo, bhMat);
        scene.add(blackHole);

        // ê°•ì°© ì›ë°˜
        const diskGroup = new THREE.Group();
        const colors = [0xffffff, 0xffdd88, 0xff8800, 0xcc2200, 0x550000];

        for(let i = 0; i < 120; i++) {
            const t = i / 120;
            const innerRad = 2.6 + t * 0.5;
            const outerRad = 3.5 + t * 4.0 * Math.pow(t, 0.5);
            
            const ringGeo = new THREE.RingGeometry(innerRad, outerRad, 64, 1);
            
            const colorIndex = Math.floor(t * (colors.length - 1));
            const ringColor = new THREE.Color(colors[colorIndex]);
            const opacity = (1 - t) * 0.15;

            const ringMat = new THREE.MeshBasicMaterial({
                color: ringColor,
                side: THREE.DoubleSide,
                transparent: true,
                opacity: opacity,
                blending: THREE.AdditiveBlending,
                depthWrite: false
            });

            const ring = new THREE.Mesh(ringGeo, ringMat);
            ring.rotation.x = Math.PI / 2;
            ring.rotation.y = (Math.random() - 0.5) * 0.1;
            diskGroup.add(ring);
        }
        
        scene.add(diskGroup);

        // ê´‘ì êµ¬ ê¸€ë¡œìš°
        const glowGeo = new THREE.SphereGeometry(2.7, 64, 64);
        const glowMat = new THREE.ShaderMaterial({
            uniforms: { 
                c: { type: "f", value: 0.3 },
                p: { type: "f", value: 3.0 },
                glowColor: { type: "c", value: new THREE.Color(0xffaa55) },
                viewVector: { type: "v3", value: camera.position }
            },
            vertexShader: `
                uniform vec3 viewVector;
                varying float intensity;
                void main() {
                    vec3 vNormal = normalize( normalMatrix * normal );
                    vec3 vNormel = normalize( normalMatrix * viewVector );
                    intensity = pow( c - dot(vNormal, vNormel), p );
                    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
                }
            `,
            fragmentShader: `
                uniform vec3 glowColor;
                varying float intensity;
                void main() {
                    vec3 glow = glowColor * intensity;
                    gl_FragColor = vec4( glow, 1.0 );
                }
            `,
            side: THREE.BackSide,
            blending: THREE.AdditiveBlending,
            transparent: true
        });
        
        const glowMesh = new THREE.Mesh(glowGeo, glowMat);
        scene.add(glowMesh);

        // ìš°ì£¼ ë°°ê²½ ë³„
        const starsGeo = new THREE.BufferGeometry();
        const starsCount = 15000;
        const posArray = new Float32Array(starsCount * 3);
        for(let i=0; i<starsCount*3; i++) {
            posArray[i] = (Math.random()-0.5)*600;
        }
        starsGeo.setAttribute('position', new THREE.BufferAttribute(posArray, 3));
        const starsMat = new THREE.PointsMaterial({
            size: 0.15, 
            color: 0xaaaaaa
        });
        const starField = new THREE.Points(starsGeo, starsMat);
        scene.add(starField);

        // ì• ë‹ˆë©”ì´ì…˜ ë£¨í”„
        function animate() {
            requestAnimationFrame(animate);
            
            if (autoRotating) {
                const radius = Math.sqrt(camera.position.x ** 2 + camera.position.z ** 2);
                const angle = Math.atan2(camera.position.z, camera.position.x);
                const newAngle = angle + rotationSpeed;
                
                camera.position.x = radius * Math.cos(newAngle);
                camera.position.z = radius * Math.sin(newAngle);
                camera.lookAt(0, 0, 0);
            }
            
            glowMat.uniforms.viewVector.value = new THREE.Vector3().subVectors(camera.position, glowMesh.position);

            controls.update();
            renderer.render(scene, camera);
        }
        animate();

        // ë²„íŠ¼ ì´ë²¤íŠ¸
        const rotateBtn = document.getElementById('rotateBtn');
        const speedControl = document.getElementById('speedControl');
        const hideBtn = document.getElementById('hideBtn');
        const infoDiv = document.getElementById('info');
        const controlsDiv = document.getElementById('controls');
        const buttonContainer = document.getElementById('buttonContainer');
        
        let isHidden = false;
        
        rotateBtn.addEventListener('click', function() {
            autoRotating = !autoRotating;
            
            if (autoRotating) {
                this.textContent = 'â¸ï¸ íšŒì „ ì¤‘ì§€';
                speedControl.classList.add('show');
            } else {
                this.textContent = 'ğŸŒ€ ìë™ íšŒì „';
                speedControl.classList.remove('show');
            }
            
            controls.autoRotate = false;
        });
        
        hideBtn.addEventListener('click', function() {
            isHidden = !isHidden;
            
            if (isHidden) {
                infoDiv.classList.add('hidden');
                controlsDiv.classList.add('hidden');
                speedControl.classList.add('hidden');
                buttonContainer.classList.add('buttons-hidden');
                this.textContent = 'ğŸ‘ï¸ ë³´ì´ê¸°';
            } else {
                infoDiv.classList.remove('hidden');
                controlsDiv.classList.remove('hidden');
                if (autoRotating) {
                    speedControl.classList.add('show');
                }
                buttonContainer.classList.remove('buttons-hidden');
                this.textContent = 'ğŸ‘ï¸ ìˆ¨ê¸°ê¸°';
            }
        });
        
        // ë§ˆìš°ìŠ¤ í˜¸ë²„ë¡œ ë²„íŠ¼ í‘œì‹œ
        buttonContainer.addEventListener('mouseenter', function() {
            if (isHidden) {
                this.classList.remove('buttons-hidden');
            }
        });
        
        buttonContainer.addEventListener('mouseleave', function() {
            if (isHidden) {
                this.classList.add('buttons-hidden');
            }
        });

        // ì†ë„ ì¡°ì ˆ
        const speedSlider = document.getElementById('speedSlider');
        const speedInput = document.getElementById('speedInput');
        const speedValue = document.getElementById('speedValue');
        
        function updateSpeed(value) {
            value = Math.max(1, Math.min(100, value));
            rotationSpeed = Math.pow(10, (value - 1) / 33 - 4);
            
            speedSlider.value = value;
            speedInput.value = value;
            
            if (value <= 10) speedValue.textContent = 'ë§¤ìš° ë§¤ìš° ëŠë¦¼';
            else if (value <= 25) speedValue.textContent = 'ë§¤ìš° ëŠë¦¼';
            else if (value <= 40) speedValue.textContent = 'ëŠë¦¼';
            else if (value <= 60) speedValue.textContent = 'ë³´í†µ';
            else if (value <= 80) speedValue.textContent = 'ë¹ ë¦„';
            else speedValue.textContent = 'ë§¤ìš° ë¹ ë¦„';
        }
        
        speedSlider.addEventListener('input', function() {
            updateSpeed(parseInt(this.value));
        });
        
        speedInput.addEventListener('input', function() {
            updateSpeed(parseInt(this.value) || 1);
        });
        
        updateSpeed(20);

        // ë°˜ì‘í˜•
        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        });
    </script>
</body>
</html>